function perform(e,t,n){function a(){i=Date.now(),window.requestAnimationFrame?(s=i-o,s>l&&(o=i-s,e()),i<c+t?requestAnimationFrame(a):n()):(e(),i<c+t?setTimeout(a,l):n())}var i,s,r=60,c=Date.now(),o=Date.now(),l=1e3/r;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,a()}function updateFlex(){$(".flex").each(function(e,t){if($(t).data("gap")){var n=parseFloat($(t).data("gap"))/2+"px";$(t).hasClass("vertical")?($(t).children().css({"margin-top":n,"margin-bottom":n}),$(t).children().first().css("margin-top","0"),$(t).children().last().css("margin-bottom","0")):($(t).children().css({"margin-left":n,"margin-right":n}),$(t).children().first().css("margin-left","0"),$(t).children().last().css("margin-right","0"))}})}function switchTab(e){var t=e.currentTarget;$(t).siblings().removeClass("active"),$(t).addClass("active");var n="#"+$(t).data("target");$(n).siblings().addClass("hidden"),$(n).removeClass("hidden")}function carousel(e){function t(){return $(e).children(".active")}function n(){return 0==t().prev(":not(.layer)").length?$(e).children(":not(.layer)").last():t().prev(":not(.layer)")}function a(){return 0==t().next(":not(.layer)").length?$(e).children(":not(.layer)").first():t().next(":not(.layer)")}function i(){n().hasClass("hidden")&&n().css("left",0-c).removeClass("hidden")}function s(){a().hasClass("hidden")&&a().css("left",c).removeClass("hidden")}function r(){return t().css("left")?parseFloat(t().css("left")):0}var c=$(e).width(),o=$(e).data("timing")?$(e).data("timing"):500,l=[];this.prev=n,this.active=t,this.next=a,this.showPrev=i,this.showNext=s,this.slidePrev=function(){if(!($(e).children(":not(.layer)").length<2)){i();var s=t(),d=n(),h=a();e.children(":not(.hidden,.layer)").moveRight(c-r(),o,function(){s.removeClass("active").addClass("hidden"),d.addClass("active"),l.forEach(function(e){e.apply(this)})}),h.addClass("hidden")}},this.slideNext=function(){if(!($(e).children(":not(.layer)").length<2)){s();var i=t(),d=n(),h=a();e.children(":not(.hidden,.layer)").moveLeft(c+r(),o,function(){i.removeClass("active").addClass("hidden"),h.addClass("active"),l.forEach(function(e){e.apply(this)})}),d.addClass("hidden")}},this.afterSlide=function(e){l.push(e)}}function initCarousel(){function e(e,n,a){$(n).data("id")||$(n).data("id",e);var i=$(n).children(":not(.layer)").length;if(!(i<2)){if(2==i){var s=$(n).children(":not(.layer)").first(),r=$(n).children(":not(.layer)").last();$(n).append(s.prop("outerHTML")).append(r.prop("outerHTML"))}if($(n).children(".active").length<1&&$(n).children(":not(.layer)").first().addClass("active"),$(n).children(":not(.active,.layer)").addClass("hidden"),$(n).hasClass("hasIndicator")&&$(n).find(".indicator").length<1){$(n).children(".layer").length<1&&$(n).append('<div class="layer"></div>'),$(n).children(".layer").append('<div class="indicator"></div>');for(var c="",o=0;o<i;o++)c+="<i></i>";$(n).find(".indicator").html(c)}t(n,a,i)}}function t(e,t,n){if($(e).find(".indicator").length>0){var a=$(e).find(".indicator").children();if(!a.hasClass("active")){var i=$(e).children(":not(.layer)").index(".active");i<0?$(a[0]).addClass("active"):$(a[i]).addClass("active")}t.afterSlide(function(){var i=$(e).children(":not(.layer)").index(t.active());a.removeClass("active"),2==n?$(a[i%2]).addClass("active"):$(a[i]).addClass("active")})}}function n(e,t){var n=0,a=0,i=($(e).width(),0),s=0,r=0,c=!0,o=!1,l=!1;t.afterSlide(function(){c=!0}),$(e).on("touchstart",function(e){if(!c)return!1;c=!1;var s=e.targetTouches[0].clientX;a=n=s,t.showPrev(),t.showNext(),i=parseFloat(t.prev().css("left")),r=parseFloat(t.next().css("left")),o=!0}),$(e).on("touchmove",function(e){if(!o)return!1;n=e.targetTouches[0].clientX;var c=n-a;t.prev().css("left",i+c),t.active().css("left",s+c),t.next().css("left",r+c),l=!0}),$(e).on("touchend",function(e){return o=!1,l?(l=!1,void(n-5>a?t.slidePrev():n+5<a?t.slideNext():(t.active().css("left",0),t.prev().addClass("hidden"),t.next().addClass("hidden"),c=!0))):(c=!0,!1)})}$(".carousel").each(function(t,a){var i=$(a).carousel();e(t,a,i),n(a,i)})}var $carousels=[];jQuery.fn.carousel=function(){var e=this.data("id");return void 0!=e?($carousels[e]||($carousels[e]=new carousel(this)),$carousels[e]):new carousel(this)},jQuery.fn.moveRight=function(e,t,n){var a=this,i=[];a.each(function(t,n){var a=$(n).css("left")?parseFloat($(n).css("left")):0;i[t]=a+e}),perform(function(){a.each(function(t,n){var a=$(n).css("left")?parseFloat($(n).css("left")):0;$(n).css("left",a+e/30)})},t,function(){a.each(function(e,t){$(t).css("left",i[e])}),n&&n(this)})},jQuery.fn.moveLeft=function(e,t,n){this.moveRight(-e,t,n)},$(document).ready(function(){initCarousel(),updateFlex(),"undefined"!=typeof Vue&&Vue.nextTick(updateFlex),$(".tab-hover").on("mouseenter",switchTab),$(".tab-click").on("click",switchTab)});