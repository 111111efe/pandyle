function perform(n,i,e){function t(){r++,n(),r<a?requestAnimationFrame(t):e()}var a=i?i:60,r=0;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,t()}function updateFlex(){$(".flex").each(function(n,i){if($(i).data("gap")){var e=parseFloat($(i).data("gap"))/2+"px";$(i).hasClass("vertical")?($(i).children().css({"margin-top":e,"margin-bottom":e}),$(i).children().first().css("margin-top","0"),$(i).children().last().css("margin-bottom","0")):($(i).children().css({"margin-left":e,"margin-right":e}),$(i).children().first().css("margin-left","0"),$(i).children().last().css("margin-right","0"))}})}function switchTab(n){var i=n.currentTarget;$(i).siblings().removeClass("active"),$(i).addClass("active");var e="#"+$(i).data("target");$(e).siblings().addClass("hidden"),$(e).removeClass("hidden")}function carousel(n){function i(){return $(n).find(".inner>.active")}function e(){return 0==i().prev().length?$(n).find(".inner>*").last():i().prev()}function t(){return 0==i().next().length?$(n).find(".inner>*").first():i().next()}function a(){return $(n).find(".inner>*")}var r=$(n).width(),s=$(n).data("timing")?$(n).data("timing"):500,l=[];this.prev=e,this.active=i,this.next=t,this.slidePrev=function(){if(!(a().length<2)){var c=i(),d=e();t();$(n).children(".inner").animate({scrollLeft:d.index()*r+"px"},s,function(){c.removeClass("active"),0==d.index()?(a().last().prev().addClass("active"),$(n).children(".inner").scrollLeft((a().length-2)*r)):d.addClass("active"),l.forEach(function(n){n.apply(this)})})}},this.slideNext=function(){if(!(a().length<2)){var c=i(),d=(e(),t());$(n).children(".inner").animate({scrollLeft:d.index()*r+"px"},s,function(){c.removeClass("active"),d.index()==a().length-1?(a().first().next().addClass("active"),$(n).children(".inner").scrollLeft(r)):d.addClass("active"),l.forEach(function(n){n.apply(this)})})}},this.afterSlide=function(n){l.push(n)}}function initCarousel(){function n(n,e,t){$(e).data("id")||$(e).data("id",n),$(e).addClass("flex").addClass("slide");var a=$(e).children(":not(.layer)").length;if(!(a<2)){var r=$(e).children(":not(.layer)").first(),s=$(e).children(":not(.layer)").last();if($(e).prepend(r.prop("outerHTML")).append(s.prop("outerHTML")),$(e).children(".active").length<1&&$(e).children(":not(.layer)").first().next().addClass("active"),$(e).children(":not(.layer)").wrapAll('<div class="inner"></div>'),$(e).children(".inner").addClass("flex").addClass("slide"),$(e).children(".inner").scrollLeft($(e).width()),$(e).hasClass("hasIndicator")&&$(e).find(".indicator").length<1){$(e).children(".layer").length<1&&$(e).append('<div class="layer"></div>'),$(e).children(".layer").append('<div class="indicator"></div>');for(var l="",c=0;c<a;c++)l+="<i></i>";$(e).find(".indicator").html(l)}i(e,t,a)}}function i(n,i,e){if($(n).find(".indicator").length>0){var t=$(n).find(".indicator").children();if(!t.hasClass("active")){var a=$(n).find(".inner>*").index(".active");a<0?$(t[0]).addClass("active"):$(t[a]).addClass("active")}i.afterSlide(function(){var a=$(n).find(".inner>*").index(i.active());t.removeClass("active"),2==e?$(t[a%2]).addClass("active"):$(t[a]).addClass("active")})}}function e(n,i){var e=0,t=0,a=($(n).width(),0),r=!0,s=!1,l=!1;i.afterSlide(function(){r=!0}),$(n).children(".inner").on("touchstart",function(i){if(!r)return void i.preventDefault();r=!1;var l=i.targetTouches[0].clientX;t=e=l,a=$(n).children(".inner").scrollLeft(),s=!0}),$(n).children(".inner").on("touchmove",function(i){if(!s)return void i.preventDefault();e=i.targetTouches[0].clientX;var r=t-e;$(n).children(".inner").scrollLeft(a+r),l=!0,i.preventDefault()}),$(n).children(".inner").on("touchend",function(n){return s=!1,l?(l=!1,void(e-5>t?i.slidePrev():e+5<t?i.slideNext():r=!0)):(r=!0,void n.preventDefault())})}$(".carousel").each(function(i,t){var a=$(t).carousel();n(i,t,a),e(t,a)})}function pop(n){$(n).removeClass("hidden"),$(n).hasClass("full")&&$("html,body").css("overflow","hidden")}function hide(n){$(n).addClass("hidden")}function bindEvent(){$(".tab-hover").on("mouseenter",switchTab),$(".tab-click").on("click",switchTab),$("[data-pop]").on("click",function(n){var i=n.currentTarget,e=$(i).data("pop");return hide(".pop"),pop("#"+e),!1}),$("html,body").on("click",function(){hide(".pop")}),$(".pop").on("click",function(){return!1})}function initTemplate(){$("t").each(function(){var n=$(this).attr("src");$(this).load(n,function(n){$(this).html(n)})})}var $carousels=[];jQuery.fn.carousel=function(){var n=this.data("id");return void 0!=n?($carousels[n]||($carousels[n]=new carousel(this)),$carousels[n]):new carousel(this)},jQuery.fn.moveRight=function(n,i,e){var t=i?i:0;this.animate({left:"+="+n},t,function(){e(this)})},jQuery.fn.moveLeft=function(n,i,e){this.moveRight(-n,i,e)},$(document).ready(function(){initTemplate(),initCarousel(),updateFlex(),bindEvent(),"undefined"!=typeof Vue&&Vue.nextTick(updateFlex)});