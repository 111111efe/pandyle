function perform(n,e,i){function t(){r++,n(),r<a?requestAnimationFrame(t):i()}var a=e?e:60,r=0;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,t()}function updateFlex(){$(".flex").each(function(n,e){if($(e).data("gap")){var i=parseFloat($(e).data("gap"))/2+"px";$(e).hasClass("vertical")?($(e).children().css({"margin-top":i,"margin-bottom":i}),$(e).children().first().css("margin-top","0"),$(e).children().last().css("margin-bottom","0")):($(e).children().css({"margin-left":i,"margin-right":i}),$(e).children().first().css("margin-left","0"),$(e).children().last().css("margin-right","0"))}})}function switchTab(n){var e=n.currentTarget;$(e).siblings().removeClass("active"),$(e).addClass("active");var i="#"+$(e).data("target");$(i).siblings().addClass("hidden"),$(i).removeClass("hidden")}function carousel(n){function e(){return $(n).find(".inner>.active")}function i(){return 0==e().prev().length?$(n).find(".inner>*").last():e().prev()}function t(){return 0==e().next().length?$(n).find(".inner>*").first():e().next()}function a(){return $(n).find(".inner>*")}var r=$(n).width(),s=$(n).data("timing")?$(n).data("timing"):500,c=[];this.prev=i,this.active=e,this.next=t,this.slidePrev=function(){if(!(a().length<2)){var l=e(),d=i();t();$(n).children(".inner").animate({scrollLeft:d.index()*r+"px"},s,function(){l.removeClass("active"),0==d.index()?(a().last().prev().addClass("active"),$(n).children(".inner").scrollLeft((a().length-2)*r)):d.addClass("active"),c.forEach(function(n){n.apply(this)})})}},this.slideNext=function(){if(!(a().length<2)){var l=e(),d=(i(),t());$(n).children(".inner").animate({scrollLeft:d.index()*r+"px"},s,function(){l.removeClass("active"),d.index()==a().length-1?(a().first().next().addClass("active"),$(n).children(".inner").scrollLeft(r)):d.addClass("active"),c.forEach(function(n){n.apply(this)})})}},this.afterSlide=function(n){c.push(n)}}function initCarousel(){function n(n,i,t){$(i).data("id")||$(i).data("id",n),$(i).addClass("flex").addClass("slide");var a=$(i).children(":not(.layer)").length;if(!(a<2)){var r=$(i).children(":not(.layer)").first(),s=$(i).children(":not(.layer)").last();if($(i).prepend(r.prop("outerHTML")).append(s.prop("outerHTML")),$(i).children(".active").length<1&&$(i).children(":not(.layer)").first().next().addClass("active"),$(i).children(":not(.layer)").wrapAll('<div class="inner"></div>'),$(i).children(".inner").addClass("flex").addClass("slide"),$(i).children(".inner").scrollLeft($(i).width()),$(i).hasClass("hasIndicator")&&$(i).find(".indicator").length<1){$(i).children(".layer").length<1&&$(i).append('<div class="layer"></div>'),$(i).children(".layer").append('<div class="indicator"></div>');for(var c="",l=0;l<a;l++)c+="<i></i>";$(i).find(".indicator").html(c)}e(i,t,a)}}function e(n,e,i){if($(n).find(".indicator").length>0){var t=$(n).find(".indicator").children();if(!t.hasClass("active")){var a=$(n).find(".inner>*").index(".active");a<0?$(t[0]).addClass("active"):$(t[a]).addClass("active")}e.afterSlide(function(){var a=$(n).find(".inner>*").index(e.active());t.removeClass("active"),2==i?$(t[a%2]).addClass("active"):$(t[a]).addClass("active")})}}function i(n,e){var i=0,t=0,a=($(n).width(),0),r=!0,s=!1,c=!1;e.afterSlide(function(){r=!0}),$(n).children(".inner").on("touchstart",function(e){if(!r)return void e.preventDefault();r=!1;var c=e.targetTouches[0].clientX;t=i=c,a=$(n).children(".inner").scrollLeft(),s=!0}),$(n).children(".inner").on("touchmove",function(e){if(!s)return void e.preventDefault();i=e.targetTouches[0].clientX;var r=t-i;$(n).children(".inner").scrollLeft(a+r),c=!0,e.preventDefault()}),$(n).children(".inner").on("touchend",function(n){return s=!1,c?(c=!1,void(i-5>t?e.slidePrev():i+5<t?e.slideNext():r=!0)):(r=!0,void n.preventDefault())})}$(".carousel").each(function(e,t){var a=$(t).carousel();n(e,t,a),i(t,a)})}function pop(n){$(n).removeClass("hidden"),$(n).hasClass("full")&&$("html,body").css("overflow","hidden")}function hide(n){$(n).addClass("hidden")}function bindEvent(){$(".tab-hover").on("mouseenter",switchTab),$(".tab-click").on("click",switchTab),$("[data-pop]").on("click",function(n){var e=n.currentTarget,i=$(e).data("pop");return hide(".pop"),pop("#"+i),!1}),$("html,body").on("click",function(){hide(".pop")}),$(".pop").on("click",function(){return!1})}function initTemplate(){$("t").each(function(){var n=$(this).attr("src");$(this).load(n,function(n){$(this).replaceWith(n)})})}var $carousels=[];jQuery.fn.carousel=function(){var n=this.data("id");return void 0!=n?($carousels[n]||($carousels[n]=new carousel(this)),$carousels[n]):new carousel(this)},jQuery.fn.moveRight=function(n,e,i){var t=e?e:0;this.animate({left:"+="+n},t,function(){i(this)})},jQuery.fn.moveLeft=function(n,e,i){this.moveRight(-n,e,i)},$(document).ready(function(){initTemplate(),initCarousel(),updateFlex(),bindEvent(),"undefined"!=typeof Vue&&Vue.nextTick(updateFlex)});