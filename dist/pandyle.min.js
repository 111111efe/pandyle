function perform(e,t,n){function i(){var a=Date.now();e(),a<s+t?setTimeout(i,r):n()}var a=40,s=Date.now(),r=1e3/a;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,i()}function updateFlex(){$(".flex").each(function(e,t){if($(t).data("gap")){var n=parseFloat($(t).data("gap"))/2+"px";$(t).hasClass("vertical")?($(t).children().css({"margin-top":n,"margin-bottom":n}),$(t).children().first().css("margin-top","0"),$(t).children().last().css("margin-bottom","0")):($(t).children().css({"margin-left":n,"margin-right":n}),$(t).children().first().css("margin-left","0"),$(t).children().last().css("margin-right","0"))}})}function switchTab(e){var t=e.currentTarget;$(t).siblings().removeClass("active"),$(t).addClass("active");var n="#"+$(t).data("target");$(n).siblings().addClass("hidden"),$(n).removeClass("hidden")}function carousel(e){function t(){return $(e).children(".active")}function n(){return 0==t().prev(":not(.layer)").length?$(e).children(":not(.layer)").last():t().prev(":not(.layer)")}function i(){return 0==t().next(":not(.layer)").length?$(e).children(":not(.layer)").first():t().next(":not(.layer)")}function a(){n().hasClass("hidden")&&n().css("left",0-c).removeClass("hidden")}function s(){i().hasClass("hidden")&&i().css("left",c).removeClass("hidden")}function r(){return t().css("left")?parseFloat(t().css("left")):0}var c=$(e).width(),o=$(e).data("timing")?$(e).data("timing"):500,d=[];this.prev=n,this.active=t,this.next=i,this.showPrev=a,this.showNext=s,this.slidePrev=function(){if(!($(e).children(":not(.layer)").length<2)){a();var s=t(),l=n(),h=i();e.children(":not(.hidden,.layer)").moveRight(c-r(),o,function(){s.removeClass("active").addClass("hidden"),l.addClass("active"),d.forEach(function(e){e.apply(this)})}),h.addClass("hidden")}},this.slideNext=function(){if(!($(e).children(":not(.layer)").length<2)){s();var a=t(),l=n(),h=i();e.children(":not(.hidden,.layer)").moveLeft(c+r(),o,function(){a.removeClass("active").addClass("hidden"),h.addClass("active"),d.forEach(function(e){e.apply(this)})}),l.addClass("hidden")}},this.afterSlide=function(e){d.push(e)}}function initCarousel(){function e(e,n,i){$(n).data("id")||$(n).data("id",e);var a=$(n).children(":not(.layer)").length;if(!(a<2)){if(2==a){var s=$(n).children(":not(.layer)").first(),r=$(n).children(":not(.layer)").last();$(n).append(s.prop("outerHTML")).append(r.prop("outerHTML"))}if($(n).children(".active").length<1&&$(n).children(":not(.layer)").first().addClass("active"),$(n).children(":not(.active,.layer)").addClass("hidden"),$(n).hasClass("hasIndicator")&&$(n).find(".indicator").length<1){$(n).children(".layer").length<1&&$(n).append('<div class="layer"></div>'),$(n).children(".layer").append('<div class="indicator"></div>');for(var c="",o=0;o<a;o++)c+="<i></i>";$(n).find(".indicator").html(c)}t(n,i,a)}}function t(e,t,n){if($(e).find(".indicator").length>0){var i=$(e).find(".indicator").children();if(!i.hasClass("active")){var a=$(e).children(":not(.layer)").index(".active");a<0?$(i[0]).addClass("active"):$(i[a]).addClass("active")}t.afterSlide(function(){var a=$(e).children(":not(.layer)").index(t.active());i.removeClass("active"),2==n?$(i[a%2]).addClass("active"):$(i[a]).addClass("active")})}}function n(e,t){var n=0,i=0,a=($(e).width(),0),s=0,r=0,c=!0,o=!1,d=!1;t.afterSlide(function(){c=!0}),$(e).on("touchstart",function(e){if(c){c=!1;var s=e.targetTouches[0].clientX;i=n=s,t.showPrev(),t.showNext(),a=parseFloat(t.prev().css("left")),r=parseFloat(t.next().css("left")),o=!0}}),$(e).on("touchmove",function(e){if(o){n=e.targetTouches[0].clientX;var c=n-i;t.prev().css("left",a+c),t.active().css("left",s+c),t.next().css("left",r+c),d=!0}}),$(e).on("touchend",function(e){return o=!1,d?(d=!1,void(n-5>i?t.slidePrev():n+5<i?t.slideNext():(t.active().css("left",0),t.prev().addClass("hidden"),t.next().addClass("hidden"),c=!0))):void(c=!0)})}$(".carousel").each(function(t,i){var a=$(i).carousel();e(t,i,a),n(i,a)})}function pop(e){$(e).removeClass("hidden"),$(e).hasClass("full")&&$("html,body").css("overflow","hidden")}function hide(e){$(e).addClass("hidden")}function bindEvent(){$(".tab-hover").on("mouseenter",switchTab),$(".tab-click").on("click",switchTab),$("[data-pop]").on("click",function(e){var t=e.currentTarget,n=$(t).data("pop");return hide(".pop"),pop("#"+n),!1}),$("html,body").on("click",function(){hide(".pop")}),$(".pop").on("click",function(){return!1})}function initTemplate(){$("t").each(function(){var e=$(this).attr("src");$(this).load(e,function(e){$(this).replaceWith(e)})})}var $carousels=[];jQuery.fn.carousel=function(){var e=this.data("id");return void 0!=e?($carousels[e]||($carousels[e]=new carousel(this)),$carousels[e]):new carousel(this)},jQuery.fn.moveRight=function(e,t,n){var i=this,a=[];i.each(function(t,n){var i=$(n).css("left")?parseFloat($(n).css("left")):0;a[t]=i+e}),perform(function(){i.each(function(n,i){var a=$(i).css("left")?parseFloat($(i).css("left")):0;$(i).css("left",a+e/(t/1e3*40))})},t,function(){i.each(function(e,t){$(t).css("left",a[e])}),n&&n(this)})},jQuery.fn.moveLeft=function(e,t,n){this.moveRight(-e,t,n)},$(document).ready(function(){initTemplate(),initCarousel(),updateFlex(),bindEvent(),"undefined"!=typeof Vue&&Vue.nextTick(updateFlex)});