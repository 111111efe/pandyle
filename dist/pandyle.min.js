function perform(e,t,i){function n(){s++,e(),s<a?requestAnimationFrame(n):i()}var a=t?t:60,s=0;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n()}function updateFlex(){$(".flex").each(function(e,t){if($(t).data("gap")){var i=parseFloat($(t).data("gap"))/2+"px";$(t).hasClass("vertical")?($(t).children().css({"margin-top":i,"margin-bottom":i}),$(t).children().first().css("margin-top","0"),$(t).children().last().css("margin-bottom","0")):($(t).children().css({"margin-left":i,"margin-right":i}),$(t).children().first().css("margin-left","0"),$(t).children().last().css("margin-right","0"))}})}function switchTab(e){var t=e.currentTarget;$(t).siblings().removeClass("active"),$(t).addClass("active");var i="#"+$(t).data("target");$(i).siblings().addClass("hidden"),$(i).removeClass("hidden")}function carousel(e){function t(){return $(e).children(".active")}function i(){return 0==t().prev(":not(.layer)").length?$(e).children(":not(.layer)").last():t().prev(":not(.layer)")}function n(){return 0==t().next(":not(.layer)").length?$(e).children(":not(.layer)").first():t().next(":not(.layer)")}function a(){i().hasClass("hidden")&&i().css("left",0-d).removeClass("hidden")}function s(){n().hasClass("hidden")&&n().css("left",d).removeClass("hidden")}function r(){return t().css("left")?parseFloat(t().css("left")):0}var d=$(e).width(),o=$(e).data("timing")?$(e).data("timing"):500,c=[];this.prev=i,this.active=t,this.next=n,this.showPrev=a,this.showNext=s,this.slidePrev=function(){if(!($(e).children(":not(.layer)").length<2)){a();var s=t(),l=i(),h=n();e.children(":not(.hidden,.layer)").moveRight(d-r(),o,function(){s.removeClass("active").addClass("hidden"),l.addClass("active"),c.forEach(function(e){e.apply(this)})}),h.addClass("hidden")}},this.slideNext=function(){if(!($(e).children(":not(.layer)").length<2)){s();var a=t(),l=i(),h=n();e.children(":not(.hidden,.layer)").moveLeft(d+r(),o,function(){a.removeClass("active").addClass("hidden"),h.addClass("active"),c.forEach(function(e){e.apply(this)})}),l.addClass("hidden")}},this.afterSlide=function(e){c.push(e)}}function initCarousel(){function e(e,i,n){$(i).data("id")||$(i).data("id",e);var a=$(i).children(":not(.layer)").length;if(!(a<2)){if(2==a){var s=$(i).children(":not(.layer)").first(),r=$(i).children(":not(.layer)").last();$(i).append(s.prop("outerHTML")).append(r.prop("outerHTML"))}if($(i).children(".active").length<1&&$(i).children(":not(.layer)").first().addClass("active"),$(i).children(":not(.active,.layer)").addClass("hidden"),$(i).hasClass("hasIndicator")&&$(i).find(".indicator").length<1){$(i).children(".layer").length<1&&$(i).append('<div class="layer"></div>'),$(i).children(".layer").append('<div class="indicator"></div>');for(var d="",o=0;o<a;o++)d+="<i></i>";$(i).find(".indicator").html(d)}t(i,n,a)}}function t(e,t,i){if($(e).find(".indicator").length>0){var n=$(e).find(".indicator").children();if(!n.hasClass("active")){var a=$(e).children(":not(.layer)").index(".active");a<0?$(n[0]).addClass("active"):$(n[a]).addClass("active")}t.afterSlide(function(){var a=$(e).children(":not(.layer)").index(t.active());n.removeClass("active"),2==i?$(n[a%2]).addClass("active"):$(n[a]).addClass("active")})}}function i(e,t){var i=0,n=0,a=($(e).width(),0),s=0,r=0,d=!0,o=!1,c=!1;t.afterSlide(function(){d=!0}),$(e).on("touchstart",function(e){if(d){d=!1;var s=e.targetTouches[0].clientX;n=i=s,t.showPrev(),t.showNext(),a=parseFloat(t.prev().css("left")),r=parseFloat(t.next().css("left")),o=!0}}),$(e).on("touchmove",function(e){if(o){i=e.targetTouches[0].clientX;var d=i-n;t.prev().css("left",a+d),t.active().css("left",s+d),t.next().css("left",r+d),c=!0}}),$(e).on("touchend",function(e){return o=!1,c?(c=!1,void(i-5>n?t.slidePrev():i+5<n?t.slideNext():(t.active().css("left",0),t.prev().addClass("hidden"),t.next().addClass("hidden"),d=!0))):void(d=!0)})}$(".carousel").each(function(t,n){var a=$(n).carousel();e(t,n,a),i(n,a)})}function pop(e){$(e).removeClass("hidden"),$(e).hasClass("full")&&$("html,body").css("overflow","hidden")}function hide(e){$(e).addClass("hidden")}function bindEvent(){$(".tab-hover").on("mouseenter",switchTab),$(".tab-click").on("click",switchTab),$("[data-pop]").on("click",function(e){var t=e.currentTarget,i=$(t).data("pop");return hide(".pop"),pop("#"+i),!1}),$("html,body").on("click",function(){hide(".pop")}),$(".pop").on("click",function(){return!1})}function initTemplate(){$("t").each(function(){var e=$(this).attr("src");$(this).load(e,function(e){$(this).replaceWith(e)})})}var $carousels=[];jQuery.fn.carousel=function(){var e=this.data("id");return void 0!=e?($carousels[e]||($carousels[e]=new carousel(this)),$carousels[e]):new carousel(this)},jQuery.fn.moveRight=function(e,t,i){var n=t?t:0;this.animate({left:"+="+e},n,function(){i(this)})},jQuery.fn.moveLeft=function(e,t,i){this.moveRight(-e,t,i)},$(document).ready(function(){initTemplate(),initCarousel(),updateFlex(),bindEvent(),"undefined"!=typeof Vue&&Vue.nextTick(updateFlex)});