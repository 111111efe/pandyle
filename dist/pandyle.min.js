function perform(e,t,n){function i(){s=Date.now(),window.requestAnimationFrame?(a=s-o,a>d&&(o=s-a,e()),s<c+t?requestAnimationFrame(i):n()):(e(),s<c+t?setTimeout(i,d):n())}var s,a,r=30,c=Date.now(),o=Date.now(),d=1e3/r;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,i()}function updateFlex(){$(".flex").each(function(e,t){if($(t).data("gap")){var n=parseFloat($(t).data("gap"))/2+"px";$(t).hasClass("vertical")?($(t).children().css({"margin-top":n,"margin-bottom":n}),$(t).children().first().css("margin-top","0"),$(t).children().last().css("margin-bottom","0")):($(t).children().css({"margin-left":n,"margin-right":n}),$(t).children().first().css("margin-left","0"),$(t).children().last().css("margin-right","0"))}})}function switchTab(e){var t=e.currentTarget;$(t).siblings().removeClass("active"),$(t).addClass("active");var n="#"+$(t).data("target");$(n).siblings().addClass("hidden"),$(n).removeClass("hidden")}function carousel(e){function t(){c.hasClass("hidden")&&c.css("left",0-s).removeClass("hidden")}function n(){o.hasClass("hidden")&&o.css("left",s).removeClass("hidden")}function i(){return r.css("left")?parseFloat(r.css("left")):0}var s=$(e).width(),a=$(e).data("timing")?$(e).data("timing"):500,r=$(e).children(".active"),c=0==r.prev().length?$(e).children().last():r.prev(),o=0==r.next().length?$(e).children().first():r.next(),d=[];this.prev=c,this.active=r,this.next=o,this.showPrev=t,this.showNext=n,this.slidePrev=function(){$(e).children().length<2||(t(),e.children(":not(.hidden)").moveRight(s-i(),a,function(){$(r).removeClass("active").addClass("hidden"),$(c).addClass("active"),d.forEach(function(e){e.apply(this)})}),$(o).addClass("hidden"))},this.slideNext=function(){$(e).children().length<2||(n(),e.children(":not(.hidden)").moveLeft(s+i(),a,function(){$(r).removeClass("active").addClass("hidden"),$(o).addClass("active"),d.forEach(function(e){e.apply(this)})}),$(c).addClass("hidden"))},this.afterSlide=function(e){d.push(e)}}function initCarousel(){$(".carousel").each(function(e,t){if(!($(t).children().length<2)){if(2==$(t).children().length){var n=$(t).children().first(),i=$(t).children().last();$(t).append(n.prop("outerHTML")).append(i.prop("outerHTML"))}$(t).children(".active").length<1&&$(t).children().first().addClass("active"),$(t).children(":not(.active)").addClass("hidden");var s,a=0,r=0,c=($(t).width(),0),o=0,d=0,l=!0,h=!1,f=!1;$(t).on("touchstart",function(e){if(!l)return!1;l=!1;var n=e.targetTouches[0].clientX;r=a=n,s=$(t).carousel(),s.afterSlide(function(){l=!0}),s.showPrev(),s.showNext(),c=parseFloat(s.prev.css("left")),d=parseFloat(s.next.css("left")),h=!0}),$(t).on("touchmove",function(e){if(!h)return!1;a=e.targetTouches[0].clientX;var t=a-r;s.prev.css("left",c+t),s.active.css("left",o+t),s.next.css("left",d+t),f=!0}),$(t).on("touchend",function(e){return h=!1,f?(f=!1,void(a-5>r?s.slidePrev():a+5<r?s.slideNext():(s.active.css("left",0),s.prev.addClass("hidden"),s.next.addClass("hidden"),l=!0))):(l=!0,!1)})}})}jQuery.fn.carousel=function(){var e=new carousel(this);return e},jQuery.fn.moveRight=function(e,t,n){var i=this,s=[];i.each(function(t,n){var i=$(n).css("left")?parseFloat($(n).css("left")):0;s[t]=i+e}),perform(function(){i.each(function(t,n){var i=$(n).css("left")?parseFloat($(n).css("left")):0;$(n).css("left",i+e/30)})},t,function(){i.each(function(e,t){$(t).css("left",s[e])}),n&&n(this)})},jQuery.fn.moveLeft=function(e,t,n){this.moveRight(-e,t,n)},$(document).ready(function(){initCarousel(),updateFlex(),"undefined"!=typeof Vue&&Vue.nextTick(updateFlex),$(".tab-hover").on("mouseenter",switchTab),$(".tab-click").on("click",switchTab)});